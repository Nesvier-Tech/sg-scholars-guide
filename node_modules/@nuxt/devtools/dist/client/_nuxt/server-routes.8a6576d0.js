import{d as ae,r as B,bm as $e,o as t,m as y,k as i,G as q,h as C,f as e,bn as se,t as L,p as N,v as W,a9 as We,aa as Z,F as I,n as M,a6 as fe,a0 as Je,a as T,w as Se,i as h,j as $,X as Te,_ as me,bo as Ve,bp as Re,ay as Ke,bq as Qe,br as Xe,bs as Ye,ab as Ze,au as et,aw as pe,ac as tt,az as ot,e as nt,a2 as Ue,l as Y,I as le,at as st,V as lt,A as De,bt as at,bu as rt,ah as it,U as ut,bv as dt,ao as ct}from"./entry.52bc93cd.js";import{_ as pt}from"./NNavbar.vue.9cb56412.js";import{_ as Ne}from"./NBadge.787d75d1.js";import{_ as Ie}from"./NSelect.vue.cdaf42b9.js";import{_ as ft}from"./NCheckbox.vue.7e495ed2.js";import{u as Ee,_ as mt}from"./storage-options.e85e583e.js";import{_ as vt}from"./DataSchemaButton.vue.e78a09d4.js";import{_ as ht}from"./NCodeBlock.vue.7e25538f.js";import{C as xe,S as je}from"./constants.2cc6e981.js";import{q as yt}from"./json-editor-vue.d503734c.js";import{_ as gt}from"./NSectionBlock.f3242abf.js";import{_ as _t}from"./NDrawer.vue.fa4b06a6.js";import"./client.7628b7e9.js";import"./NIconTitle.vue.8e6741d5.js";const ne=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function bt(l,g){if(typeof l!="string")throw new TypeError("argument str must be a string");const u={},k=(g||{}).decode||Ct;let x=0;for(;x<l.length;){const p=l.indexOf("=",x);if(p===-1)break;let f=l.indexOf(";",x);if(f===-1)f=l.length;else if(f<p){x=l.lastIndexOf(";",p-1)+1;continue}const s=l.slice(x,p).trim();if(u[s]===void 0){let d=l.slice(p+1,f).trim();d.codePointAt(0)===34&&(d=d.slice(1,-1)),u[s]=xt(d,k)}x=f+1}return u}function Ce(l,g,u){const o=u||{},k=o.encode||wt;if(typeof k!="function")throw new TypeError("option encode is invalid");if(!ne.test(l))throw new TypeError("argument name is invalid");const x=k(g);if(x&&!ne.test(x))throw new TypeError("argument val is invalid");let p=l+"="+x;if(o.maxAge!==void 0&&o.maxAge!==null){const f=o.maxAge-0;if(Number.isNaN(f)||!Number.isFinite(f))throw new TypeError("option maxAge is invalid");p+="; Max-Age="+Math.floor(f)}if(o.domain){if(!ne.test(o.domain))throw new TypeError("option domain is invalid");p+="; Domain="+o.domain}if(o.path){if(!ne.test(o.path))throw new TypeError("option path is invalid");p+="; Path="+o.path}if(o.expires){if(!kt(o.expires)||Number.isNaN(o.expires.valueOf()))throw new TypeError("option expires is invalid");p+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(p+="; HttpOnly"),o.secure&&(p+="; Secure"),o.priority)switch(typeof o.priority=="string"?o.priority.toLowerCase():o.priority){case"low":p+="; Priority=Low";break;case"medium":p+="; Priority=Medium";break;case"high":p+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:p+="; SameSite=Strict";break;case"lax":p+="; SameSite=Lax";break;case"strict":p+="; SameSite=Strict";break;case"none":p+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return p}function kt(l){return Object.prototype.toString.call(l)==="[object Date]"||l instanceof Date}function xt(l,g){try{return g(l)}catch{return l}}function Ct(l){return l.includes("%")?decodeURIComponent(l):l}function wt(l){return encodeURIComponent(l)}const $t=i("div",{"x-divider":""},null,-1),Oe=ae({__name:"ServerRouteListItem",props:{item:{},index:{default:0}},setup(l){const g=B(!0),u=$e();return(o,k)=>{const x=fe,p=Ne,f=Oe;return t(),y("div",null,[i("button",{flex:"~ gap-2","w-full":"","items-start":"","items-center":"","hover-bg-active":"",px2:"",py1:"",class:q([{"bg-active":e(u)===o.item.filepath}]),style:We({paddingLeft:`calc(0.5rem + ${o.index*1.5}em)`}),onClick:k[0]||(k[0]=s=>{g.value=!e(g),u.value=o.item.filepath})},[i("div",{class:q({"w-12":!o.item.routes}),"flex-none":"","text-left":""},[o.item.type==="collection"?(t(),C(x,{key:0,icon:"carbon:chevron-right","mb0.5":"","transform-rotate":e(g)?90:0,transition:""},null,8,["transform-rotate"])):(t(),C(p,{key:1,class:q(("getRequestMethodClass"in o?o.getRequestMethodClass:e(se))(o.item.method||"*")),textContent:L((o.item.method||"*").toUpperCase())},null,8,["class","textContent"]))],2),i("span",{class:q({"flex items-center":o.item.routes}),"text-sm":"","font-mono":""},[o.item.type==="collection"?(t(),C(x,{key:0,title:`${o.item.routes?.length} routes`,icon:"carbon:folder",mr1:""},null,8,["title"])):N("",!0),W(" "+L(o.item.route),1)],2)],6),$t,e(g)?Z(o.$slots,"default",{key:0},()=>[(t(!0),y(I,null,M(o.item.routes,s=>(t(),C(f,{key:s.filepath,item:s,index:o.index+1},null,8,["item","index"]))),128))]):N("",!0)])}}}),St={p4:"",flex:"~ col gap-4"},Tt={key:1,ml2:"",flex:""},Vt=["value"],Rt={key:0,flex:"","gap-4":""},Ut=i("div",{"flex-auto":""},null,-1),Le=ae({__name:"ServerRouteInputs",props:{modelValue:{},keys:{default:()=>[]},default:{default:()=>({})},disabled:{type:Boolean,default:!1}},setup(l,{emit:g}){const u=l,k=Je(u,"modelValue",g,{passive:!0}),x=T(()=>[...u.keys,"active","key","value","type"]),p=T(()=>{const d={};for(const a of x.value)d[a]=u.default[a]||"";return d}),f=["string","number","boolean","file","date","time","datetime-local"];function s(d,a){const E=a.target;if(E.files&&E.files[0]){const F=E.files[0],H=new FileReader;H.readAsDataURL(F),H.onload=()=>{k.value[d].value=H.result}}}return Se(()=>k,d=>{d.value.forEach(a=>{if(a.type==="number"&&typeof a.value!="number"){const E=Number.parseFloat(a.value);a.value=Number.isNaN(E)?0:E}else a.type==="boolean"&&typeof a.value!="boolean"?a.value=!0:a.type==="file"&&typeof a.value!="object"?a.value="":a.type==="date"&&typeof a.value=="string"&&!a.value.match(/^\d{4}-\d{2}-\d{2}$/)?a.value=new Date().toISOString().slice(0,10):a.type==="time"&&typeof a.value=="string"&&!a.value.match(/^\d{2}:\d{2}$/)?a.value=new Date().toISOString().slice(11,16):a.type==="datetime-local"&&typeof a.value=="string"&&!a.value.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/)?a.value=new Date().toISOString().slice(0,16):a.type==="string"&&(a.value=a.value.toString())})},{deep:!0,immediate:!0,flush:"sync"}),(d,a)=>{const E=ft,F=Te,H=Ie,V=fe,w=me;return t(),y("div",St,[(t(!0),y(I,null,M(e(k),(m,S)=>(t(),y("div",{key:S,flex:"~ gap-2","justify-around":""},[Z(d.$slots,"input",{item:m}),(t(!0),y(I,null,M(e(x),_=>(t(),y(I,{key:_},[m.type!==null&&_==="active"?(t(),C(E,{key:0,modelValue:m[_],"onUpdate:modelValue":b=>m[_]=b,n:"sm primary",disabled:d.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])):N("",!0),m.type!==null&&_==="key"?(t(),C(F,{key:1,modelValue:m[_],"onUpdate:modelValue":b=>m[_]=b,placeholder:_,"flex-1":"","font-mono":"",n:"sm primary",disabled:d.disabled,class:q(d.disabled?"op50":"")},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","class"])):_==="value"?(t(),y(I,{key:2},[m.type==="file"?(t(),C(F,{key:0,type:"file",disabled:d.disabled,class:q(d.disabled?"op75":""),onChange:b=>s(S,b)},null,8,["disabled","class","onChange"])):m.type==="boolean"?(t(),y("div",Tt,[h(E,{modelValue:m.value,"onUpdate:modelValue":b=>m.value=b,placeholder:"Value",n:"green lg",disabled:d.disabled},null,8,["modelValue","onUpdate:modelValue","disabled"])])):(t(),C(F,{key:2,modelValue:m.value,"onUpdate:modelValue":b=>m.value=b,type:m.type,placeholder:"Value","flex-1":"","font-mono":"",n:"sm primary",disabled:d.disabled,class:q(d.disabled?"op75":"")},null,8,["modelValue","onUpdate:modelValue","type","disabled","class"]))],64)):_==="type"?(t(),C(H,{key:3,modelValue:m.type,"onUpdate:modelValue":b=>m.type=b,n:"sm green",class:q(d.disabled?"op75":""),disabled:d.disabled},{default:$(()=>[(t(),y(I,null,M(f,b=>i("option",{key:b,value:b},L(b),9,Vt)),64))]),_:2},1032,["modelValue","onUpdate:modelValue","class","disabled"])):N("",!0)],64))),128)),Z(d.$slots,"input-actions",{},()=>[h(w,{n:"red",disabled:d.disabled,class:q(d.disabled?"op0!":""),onClick:_=>e(k).splice(S,1)},{default:$(()=>[h(V,{icon:"carbon:trash-can"})]),_:2},1032,["disabled","class","onClick"])])]))),128)),d.disabled?N("",!0):(t(),y("div",Rt,[Z(d.$slots,"actions",{params:e(k)},()=>[h(w,{icon:"carbon-add",n:"sm primary",my1:"","px-3":"",onClick:a[0]||(a[0]=m=>e(k).push({...e(p)}))},{default:$(()=>[W(" Add ")]),_:1}),Ut,e(k).length?(t(),C(w,{key:0,icon:"carbon-trash-can",n:"sm red",my1:"","px-3":"",onClick:a[1]||(a[1]=m=>k.value=[])},{default:$(()=>[W(" Remove All ")]),_:1})):N("",!0)])])),Z(d.$slots,"default")])}}}),Dt={path:"/",watch:!0,decode:l=>Xe(decodeURIComponent(l)),encode:l=>encodeURIComponent(typeof l=="string"?l:JSON.stringify(l))};function Nt(l,g){const u={...Dt,...g},o=It(u)||{};let k;u.maxAge!==void 0?k=u.maxAge*1e3:u.expires&&(k=u.expires.getTime()-Date.now());const x=k!==void 0&&k<=0,p=x?void 0:o[l]??u.default?.(),f=k&&!x?Ot(p,k):B(p);{const s=typeof BroadcastChannel>"u"?null:new BroadcastChannel(`nuxt:cookies:${l}`),d=()=>{jt(l,f.value,u),s?.postMessage(u.encode(f.value))};let a=!1;Ve()&&Re(()=>{a=!0,d(),s?.close()}),s&&(s.onmessage=E=>{a=!0,f.value=u.decode(E.data),Ke(()=>{a=!1})}),u.watch?Se(f,()=>{a||d()},{deep:u.watch!=="shallow"}):d()}return f}function It(l={}){return bt(document.cookie,l)}function Et(l,g,u={}){return g==null?Ce(l,g,{...u,maxAge:-1}):Ce(l,g,u)}function jt(l,g,u={}){document.cookie=Et(l,g,u)}const we=2147483647;function Ot(l,g){let u,o=0;return Ve()&&Re(()=>{clearTimeout(u)}),Qe((k,x)=>{function p(){clearTimeout(u);const f=g-o,s=f<we?f:we;u=setTimeout(()=>{if(o+=s,o<g)return p();l=void 0,x()},s)}return{get(){return k(),l},set(f){p(),l=f,x()}}})}const Lt={"h-full":"","w-full":"",flex:"~ col"},qt={flex:"~ col gap-2","flex-none":"",p4:"","n-navbar-glass":""},At={flex:"~ gap2 items-center"},Pt={relative:"","w-full":""},Bt={absolute:"","right-2":"","top-1.5":"",flex:"~ gap-1"},Mt={flex:"~ gap2 wrap","w-full":"","items-center":"",px4:"",pb2:"","text-center":"","text-sm":"",border:"b base"},Ft=i("div",{"flex-auto":""},null,-1),zt=i("div",{"text-xs":"",op50:""}," Send from ",-1),Ht=i("option",{value:"app"}," App ",-1),Gt=i("option",{value:"devtools"}," DevTools ",-1),Wt={key:0,border:"b base","items-center":"",px4:"",py2:"",grid:"~ cols-[max-content_1fr] gap-2"},Jt={"text-right":"","font-mono":""},Kt={key:1,border:"b base",p4:"",flex:"~ col gap-4","font-mono":""},Qt={flex:"~ gap-4"},Xt={flex:"~ gap2","mb--2":"","items-center":"",op50:""},Yt=i("div",{"w-5":"","x-divider":""},null,-1),Zt=i("div",{"flex-none":""}," Default Inputs ",-1),eo=i("div",{"x-divider":""},null,-1),to={key:2},oo={key:3,border:"b base",relative:"","n-code-block":""},no={flex:"~ wrap","w-full":""},so=["onClick"],lo=i("div",{border:"b base","flex-auto":""},null,-1),ao={border:"b base",flex:"~ gap2","items-center":"",px4:"",py2:""},ro=i("div",null,"Response",-1),io={key:1,"text-xs":"",op50:""},uo=i("div",{"flex-auto":""},null,-1),co=i("div",{op50:""}," Request finished in ",-1),po={key:0,"flex-auto":"","overflow-auto":""},fo={border:"~ base","h-full":"","w-full":"",rounded:""},mo=["data"],vo={key:2,"flex-auto":"","overflow-auto":"",p4:""},ho={border:"~ base",rounded:""},yo=["src"],go={key:1,controls:"",rounded:""},_o=["src"],bo=ae({__name:"ServerRouteDetails",props:{route:{}},emits:["open-default-input"],setup(l,{emit:g}){const u=l,o=g,[k,x]=Ye(),p=Ze(),f=et(),s=pe({contentType:"text/plain",data:"",statusCode:200,error:void 0,fetchTime:0}),d=T(()=>s.contentType.includes("application/json")?"json":s.contentType.includes("text/html")?"html":s.contentType.includes("text/css")?"css":s.contentType.includes("text/javascript")?"javascript":s.contentType.includes("image")||s.contentType.includes("video")?"media":s.contentType.includes("text/xml")||s.contentType.includes("application/xml")?"xml":s.contentType.includes("application/pdf")?"pdf":"text"),a=T(()=>{if(d.value==="json")return JSON.stringify(s.data,null,2);if(d.value==="media"||d.value==="pdf"){const n=new Blob([s.data],{type:s.contentType});return URL.createObjectURL(n)}return s.data}),E=B(!1),F=B(!1),H=tt(),V=T(()=>u.route.route?.split(/((?:\*\*)?:[\w_]+)/g)),w=T(()=>V.value?.filter(n=>n.startsWith(":")||n.startsWith("**:"))||[]),m=B(u.route.method||"GET"),S=B({}),_=pe({query:[{active:!0,key:"",value:"",type:"string"}],body:[{active:!0,key:"",value:"",type:"string"}],headers:[{active:!0,key:"Content-Type",value:"application/json",type:"string"}]}),b=B({}),{inputDefaults:R,sendFrom:O}=Ee("serverRoutes"),P=T(()=>f?.value?.app?.$fetch?O.value:"devtools"),re=["GET","POST","PUT","PATCH","DELETE","HEAD"],ie=["PATCH","POST","PUT","DELETE"],ee=T(()=>ie.includes(m.value.toUpperCase())),A=B(w.value.length?"params":"query"),U=["input","json"],G=B(U[0]),te=T({get:()=>_[A.value],set:n=>{_[A.value]=n}}),ve=T(()=>({...K(R.value.query),...K(_.query)})),he=T(()=>({...K(R.value.headers),...K(_.headers)})),ue=T(()=>ee.value?G.value==="json"?{...K(R.value.body),...b.value}:{...K(R.value.body),...K(_.body)}:void 0),qe=T(()=>{let n=window?.location.origin;return n.charAt(n.length-1)==="/"&&(n=n.slice(0,-1)),n}),oe=T(()=>{let n=new URLSearchParams(ve.value).toString();n&&(n=`?${n}`);const c=(V.value?.map(j=>(j.startsWith(":")||j.startsWith("**:"))&&S.value[j]||j).join("")||"")+n;let v=p.value?.app.baseURL||"";return(v==="./"||v===".")&&(v=""),v.endsWith("/")&&(v=v.slice(0,-1)),v+c}),ye=T(()=>qe.value+oe.value);function K(n){const c=Object.fromEntries(n.filter(({active:v,key:j,value:D})=>v&&j&&D!==void 0).map(({key:v,value:j})=>[v,j]));return Object.entries(c).length?c:void 0}async function ge(){F.value=!0,E.value=!0;const n=Date.now(),c=P.value==="app"?f.value.app.$fetch:$fetch;lt("server-routes:fetch",{method:m.value,sendFrom:P.value});try{s.data=await c(ye.value,{method:m.value.toUpperCase(),headers:he.value,query:ve.value,body:ue.value,onResponse({response:v}){s.contentType=(v.headers.get("content-type")||"").toString().toLowerCase().trim(),s.statusCode=v.status,s.error=void 0},onResponseError(v){s.error=v.response._data,s.data=v.response._data}})}catch{}E.value=!1,s.fetchTime=Date.now()-n}const _e=T(()=>{const n=[],c=[],v=Object.entries(he.value).filter(([D,z])=>D&&z&&!(D==="Content-Type"&&z==="application/json")).map(([D,z])=>`  '${D}': '${z}'`).join(`,
`);m.value.toUpperCase()!=="GET"&&c.push(`method: '${m.value.toUpperCase()}'`),v&&c.push(`headers: {
${v}
}`),ue.value&&c.push(`body: ${JSON.stringify(ue.value,null,2)}`);const j=c.length?`, {
${c.join(`,
`).split(`
`).map(D=>`  ${D}`).join(`
`)}
}`:"";return n.push({name:"useFetch",lang:"javascript",docs:xe.nuxt.useFetch,code:`const { data, pending, error, refresh } = useFetch('${oe.value}'${j})`}),n.push({name:"$fetch",lang:"javascript",docs:xe.nuxt.$fetch,code:`await $fetch('${oe.value}'${j})`}),n}),Q=B(Pe()),J=pe({key:"",value:""}),Ae=T(()=>{const n=[];return w.value.length&&n.push({name:"Params",slug:"params",length:w.value.length}),n.push({name:"Query",slug:"query",length:_.query.length}),ee.value&&n.push({name:"Body",slug:"body",length:_.body.length}),n.push({name:"Headers",slug:"headers",length:_.headers.length}),n.push({name:"Cookies",slug:"cookies",length:Q.value.length}),n.push({name:"Snippets",slug:"snippet"}),n});function Pe(){return document.cookie.split("; ").map(n=>{const[c,v]=n.split("=");return{key:c,value:v}}).filter(n=>n.key)}function de(n,c){if(!n)return;const v=Q.value.find(D=>D.key===n),j=Nt(n);v!==void 0?c===void 0&&(Q.value=Q.value.filter(D=>D.key!==n)):(Q.value.push({key:n,value:c}),J.key="",J.value=""),j.value=c}ot(()=>{G.value==="json"&&typeof b.value=="string"&&(b.value=JSON.parse(b.value))});const Be=nt();return(n,c)=>{const v=me,j=Ie,D=Te,z=fe,be=Le,Me=mt,Fe=De,ze=at,ce=Ne,He=vt,Ge=ht,ke=Ue("tooltip");return t(),y("div",Lt,[i("div",qt,[i("div",At,[n.route.method?(t(),C(v,{key:0,class:q(["n-badge-base n-sm",("getRequestMethodClass"in n?n.getRequestMethodClass:e(se))(e(m))]),"pointer-events-none":"","font-mono":"",tabindex:"-1"},{default:$(()=>[W(L(e(m).toUpperCase()),1)]),_:1},8,["class"])):(t(),C(j,{key:1,modelValue:e(m),"onUpdate:modelValue":c[0]||(c[0]=r=>Y(m)?m.value=r:null),class:q(["n-badge-base n-sm",("getRequestMethodClass"in n?n.getRequestMethodClass:e(se))(e(m))])},{default:$(()=>[(t(),y(I,null,M(re,r=>i("option",{key:r,class:q(("getRequestMethodClass"in n?n.getRequestMethodClass:e(se))(r))},L(r.toUpperCase()),3)),64))]),_:1},8,["modelValue","class"])),i("div",Pt,[h(D,{"model-value":e(oe),readonly:"","flex-auto":"","font-mono":"",p:"x5 y2",n:"sm"},null,8,["model-value"]),i("div",Bt,[le(h(v,{title:"Copy URL",n:"xs blue",icon:"carbon:copy",border:!1,onClick:c[1]||(c[1]=r=>e(Be)(e(ye),"server-route-url"))},null,512),[[ke,"Copy URL"]]),le(h(v,{title:"Open in Editor",icon:"carbon-launch",n:"xs blue",border:!1,onClick:c[2]||(c[2]=r=>e(H)(n.route.filepath))},null,512),[[ke,"Open in Editor"]])])]),h(v,{"h-full":"",n:"primary solid",onClick:ge},{default:$(()=>[h(z,{icon:"carbon:send"})]),_:1})])]),i("div",Mt,[(t(!0),y(I,null,M(e(Ae),r=>(t(),C(v,{key:r.slug,class:q(e(A)===r.slug?"text-primary n-primary":"border-transparent shadow-none"),onClick:X=>A.value=r.slug},{default:$(()=>[h(z,{icon:("ServerRouteTabIcons"in n?n.ServerRouteTabIcons:e(je))[r.slug]},null,8,["icon"]),W(" "+L(r.name)+" "+L(r?.length?`(${r.length})`:"")+" ",1),i("span",null,L(e(R)[r.slug]?.length?`(${e(R)[r.slug].length})`:""),1)]),_:2},1032,["class","onClick"]))),128)),Ft,zt,h(j,{modelValue:e(P),"onUpdate:modelValue":c[3]||(c[3]=r=>Y(P)?P.value=r:null),class:"n-xs",disabled:!e(f)?.app?.$fetch},{default:$(()=>[Ht,Gt]),_:1},8,["modelValue","disabled"])]),e(A)==="params"?(t(),y("div",Wt,[(t(!0),y(I,null,M(e(w),r=>(t(),y(I,{key:r},[i("div",Jt,L(r),1),h(D,{modelValue:e(S)[r],"onUpdate:modelValue":X=>e(S)[r]=X,placeholder:r,"flex-1":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])],64))),128))])):N("",!0),e(A)==="cookies"?(t(),y("div",Kt,[(t(!0),y(I,null,M(e(Q),r=>(t(),y("div",{key:r.key,flex:"~ gap-4 items-center"},[h(D,{placeholder:"Key...","model-value":r.key,disabled:"","op-70":""},null,8,["model-value"]),h(D,{placeholder:"Value...","model-value":r.value,"flex-1":"",n:"primary",onInput:X=>de(r.key,X.target?.value)},null,8,["model-value","onInput"]),h(v,{title:"Delete",n:"red",onClick:X=>de(r.key,void 0)},{default:$(()=>[h(z,{icon:"i-carbon-trash-can"})]),_:2},1032,["onClick"])]))),128)),i("div",Qt,[h(D,{modelValue:e(J).key,"onUpdate:modelValue":c[4]||(c[4]=r=>e(J).key=r),placeholder:"Key",n:"primary","flex-1":""},null,8,["modelValue"]),h(D,{modelValue:e(J).value,"onUpdate:modelValue":c[5]||(c[5]=r=>e(J).value=r),placeholder:"Value",n:"primary","flex-1":""},null,8,["modelValue"]),h(v,{title:"Add",n:"primary",onClick:c[6]||(c[6]=r=>de(e(J).key,e(J).value))},{default:$(()=>[h(z,{icon:"i-carbon-save"})]),_:1})])])):N("",!0),h(e(k),null,{default:$(()=>[h(be,{modelValue:e(te),"onUpdate:modelValue":c[9]||(c[9]=r=>Y(te)?te.value=r:null),default:{active:!0,type:"string"},"max-h-xs":"","of-auto":""},{default:$(()=>[e(R)[e(A)]?.length?(t(),y(I,{key:0},[i("div",Xt,[Yt,Zt,h(v,{icon:"i-carbon-edit",border:!1,onClick:c[7]||(c[7]=r=>o("open-default-input"))}),eo]),h(be,{modelValue:e(R)[e(A)],"onUpdate:modelValue":c[8]||(c[8]=r=>e(R)[e(A)]=r),disabled:"",p0:""},null,8,["modelValue"])],64)):N("",!0)]),_:1},8,["modelValue"])]),_:1}),e(A)==="snippet"?(t(),y("div",to,[e(_e).length?(t(),C(Me,{key:0,"code-snippets":e(_e)},null,8,["code-snippets"])):N("",!0)])):e(te)?(t(),y("div",oo,[e(A)==="body"?(t(),y(I,{key:0},[i("div",no,[(t(),y(I,null,M(U,r=>i("button",{key:r,px4:"",py2:"",border:"r base",hover:"bg-active",class:q({"border-b":r!==e(G)}),onClick:X=>G.value=r},[i("div",{class:q({op30:r!==e(G)}),"font-mono":""},L(r),3)],10,so)),64)),lo]),e(G)==="input"?(t(),C(e(x),{key:0})):e(G)==="json"?(t(),C(e(yt),st({key:1,modelValue:e(b),"onUpdate:modelValue":c[10]||(c[10]=r=>Y(b)?b.value=r:null),class:[[n.$colorMode.value==="dark"?"jse-theme-dark":"light"],"json-editor-vue of-auto text-sm outline-none"]},n.$attrs,{mode:"text","navigation-bar":!1,indentation:2,"tab-size":2}),null,16,["modelValue","class"])):N("",!0)],64)):(t(),C(e(x),{key:1}))])):N("",!0),e(F)?e(E)?(t(),C(ze,{key:5,"z-10":"","flex-auto":"","backdrop-blur":""},{default:$(()=>[W(" Fetching... ")]),_:1})):(t(),y(I,{key:6},[i("div",ao,[ro,e(s).error?(t(),C(ce,{key:0,n:"red"},{default:$(()=>[W(" Error ")]),_:1})):N("",!0),h(ce,{n:e(s).error?"orange":"green",textContent:L(e(s).statusCode)},null,8,["n","textContent"]),e(s).contentType?(t(),y("code",io,L(e(s).contentType),1)):N("",!0),e(s).contentType==="application/json"?(t(),C(He,{key:2,getter:()=>({input:e(a)})},null,8,["getter"])):N("",!0),uo,co,h(ce,{n:"green"},{default:$(()=>[W(L(e(s).fetchTime)+" ms ",1)]),_:1})]),e(d)==="pdf"?(t(),y("div",po,[i("div",fo,[i("object",{data:e(a),type:"application/pdf","flex-auto":"",width:"100%",height:"100%",rounded:""},null,8,mo)])])):e(d)!=="media"?(t(),C(Ge,{key:1,"flex-auto":"","overflow-auto":"","py-2":"",code:e(a),lang:e(d)},null,8,["code","lang"])):(t(),y("div",vo,[i("div",ho,[e(s).contentType.includes("image")?(t(),y("img",{key:0,rounded:"",src:e(a)},null,8,yo)):(t(),y("video",go,[i("source",{src:e(a),type:"video/mp4"},null,8,_o)]))])]))],64)):(t(),C(Fe,{key:4},{default:$(()=>[h(v,{n:"primary",onClick:ge},{default:$(()=>[h(z,{icon:"carbon:send"}),W(" Send request ")]),_:1})]),_:1}))])}}}),ko={flex:"~ gap1","text-sm":""},xo={key:0,op50:""},Co={op50:""},wo=i("span",{op75:""},"Select a route to start",-1),$o=i("div",{p4:"",border:"b base"},[i("span",{"text-lg":""},"Default Inputs"),i("br"),i("span",{"text-white":"",op50:""},"Merged as default for every request in DevTools")],-1),Po=ae({__name:"server-routes",setup(l){const g=B(!1),u=rt(),o=$e(),{selectedRoute:k,view:x,inputDefaults:p}=Ee("serverRoutes"),f=T(()=>{!o.value&&k.value&&(o.value=k.value.filepath);const V=u.value?.find(w=>w.filepath===o.value);return o.value!==k.value?.filepath&&V&&(k.value=V),V}),s=B(""),d=T(()=>new it(u.value||[],{keys:["method","route"],shouldSort:!0})),a=T(()=>u.value?s.value?d.value.search(s.value).map(w=>w.item):u.value:[]),E=T(()=>{const V=[],w=(S,_)=>{S.routes=S.routes||[],S.routes.push(_)},m=(S,_)=>{const b=_?_.routes?.find(O=>O.route===S):V.find(O=>O.route===S);if(b)return b;const R={route:S,filepath:S.replace(/\W/g,"-").toLowerCase(),type:"collection",routes:[]};return _?w(_,R):V.push(R),R};return a.value.forEach(S=>{let _,b;const R=S.filepath.split("/"),O=R.slice(R.indexOf("server")+1);if(S.type==="runtime"){O[0]="runtime";const P=R.indexOf("dist");P!==-1&&(_=R[P-1],_&&O.splice(1,0,_))}O.length>0&&O[O.length-1].includes(".")&&O.pop(),O.forEach(P=>{b=m(P,b)}),b?w(b,S):V.push(S)}),V});function F(){x.value=x.value==="tree"?"list":"tree"}function H(V){return V.charAt(0).toUpperCase()+V.slice(1)}return(V,w)=>{const m=me,S=pt,_=Oe,b=bo,R=ct,O=De,P=ut,re=Le,ie=gt,ee=_t,A=Ue("tooltip");return t(),y(I,null,[h(P,{"storage-key":"tab-server-routes"},{left:$(()=>[h(S,{search:e(s),"onUpdate:search":w[1]||(w[1]=U=>Y(s)?s.value=U:null),pb2:""},{actions:$(()=>[le(h(m,{"text-lg":"",icon:e(x)==="list"?"i-carbon-list":"i-carbon-tree-view-alt",title:"Toggle view",border:!1,onClick:F},null,8,["icon"]),[[A,"Toggle View"]]),le(h(m,{"text-lg":"",icon:"i-carbon-cics-sit-overrides",title:"Default Inputs",border:!1,onClick:w[0]||(w[0]=U=>g.value=!e(g))},null,512),[[A,"Default Inputs"]])]),default:$(()=>[i("div",ko,[e(s)?(t(),y("span",xo,L(e(a).length)+" matched · ",1)):N("",!0),i("span",Co,L(e(u)?.length)+" routes in total",1)])]),_:1},8,["search"]),(t(!0),y(I,null,M(e(x)==="tree"?e(E):e(a),U=>(t(),C(_,{key:U.filepath,item:U},null,8,["item"]))),128))]),right:$(()=>[(t(),C(dt,{max:10},[e(f)?(t(),C(b,{key:e(f).filepath,route:e(f),onOpenDefaultInput:w[2]||(w[2]=U=>g.value=!0)},null,8,["route"])):N("",!0)],1024)),e(f)?N("",!0):(t(),C(O,{key:0},{default:$(()=>[h(R,{px6:"",py2:""},{default:$(()=>[wo]),_:1})]),_:1}))]),_:1}),h(ee,{modelValue:e(g),"onUpdate:modelValue":w[3]||(w[3]=U=>Y(g)?g.value=U:null),"auto-close":"","max-w-xl":"","min-w-xl":"",onClose:w[4]||(w[4]=U=>g.value=!1)},{default:$(()=>[i("div",null,[$o,(t(!0),y(I,null,M(Object.keys(e(p)),U=>(t(),C(ie,{key:U,text:`${H(U)} ${e(p)[U].length?`(${e(p)[U].length})`:""}`,padding:!1,icon:("ServerRouteTabIcons"in V?V.ServerRouteTabIcons:e(je))[U]},{default:$(()=>[h(re,{modelValue:e(p)[U],"onUpdate:modelValue":G=>e(p)[U]=G,py0:"",default:{active:!0,type:"string"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["text","icon"]))),128))])]),_:1},8,["modelValue"])],64)}}});export{Po as default};
